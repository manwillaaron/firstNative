{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import React,{Component}from'react';import Scan from\"./scan\";import config from\"../config\";var CameraContainer=function(_Component){_inherits(CameraContainer,_Component);function CameraContainer(props){var _this;_classCallCheck(this,CameraContainer);_this=_possibleConstructorReturn(this,_getPrototypeOf(CameraContainer).call(this,props));_this.takePicture=function _callee(value){var options,data;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!value){_context.next=8;break;}options={quality:0.5,base64:true};_context.next=4;return _regeneratorRuntime.awrap(value.takePictureAsync(options));case 4:data=_context.sent;console.log(data);_this.setState({cameraResult:true,result:data.base64,camera:false},function(){return _this.callGoogleVIsionApi(_this.state.result);});_this.setState({loading:true});case 8:case\"end\":return _context.stop();}}});};_this.callGoogleVIsionApi=function _callee2(base64){var googleVisionRes;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(fetch(config.googleCloud.api+config.googleCloud.apiKey,{method:'POST',body:JSON.stringify({\"requests\":[{\"image\":{\"content\":base64},features:[{type:\"LABEL_DETECTION\",maxResults:10},{type:\"LANDMARK_DETECTION\",maxResults:5},{type:\"FACE_DETECTION\",maxResults:5},{type:\"LOGO_DETECTION\",maxResults:5},{type:\"TEXT_DETECTION\",maxResults:5},{type:\"DOCUMENT_TEXT_DETECTION\",maxResults:5},{type:\"SAFE_SEARCH_DETECTION\",maxResults:5},{type:\"IMAGE_PROPERTIES\",maxResults:5},{type:\"CROP_HINTS\",maxResults:5},{type:\"WEB_DETECTION\",maxResults:5}]}]})}));case 2:googleVisionRes=_context2.sent;_context2.next=5;return _regeneratorRuntime.awrap(googleVisionRes.json().then(function(googleVisionRes){console.log(googleVisionRes);if(googleVisionRes){_this.setState({loading:false,googleVisionDetetion:googleVisionRes.responses[0]});console.log('this.is response',_this.state.googleVisionDetetion);}}).catch(function(error){console.log(error);}));case 5:case\"end\":return _context2.stop();}}});};_this.activeCamera=function(){_this.setState({camera:true});};_this.clickAgain=function(){_this.setState({camera:true,googleVisionDetetion:false,loading:false});};_this.state={camera:false,cameraResult:false,result:null,visionResponse:'',loading:false,googleVisionDetetion:undefined};return _this;}_createClass(CameraContainer,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,camera=_this$state.camera,cameraResult=_this$state.cameraResult,result=_this$state.result,googleVisionDetetion=_this$state.googleVisionDetetion,loading=_this$state.loading;return React.createElement(Scan,{camera:camera,cameraResult:cameraResult,result:result,clickAgain:this.clickAgain,takePicture:function takePicture(value){return _this2.takePicture(value);},activeCamera:this.activeCamera,googleVisionDetetion:googleVisionDetetion,loading:loading});}}]);return CameraContainer;}(Component);export default CameraContainer;","map":{"version":3,"sources":["C:/Users/manwi/personal-projects/firstnative/ponents/camera/cameraContainer.js"],"names":["React","Component","Scan","config","CameraContainer","props","takePicture","value","options","quality","base64","takePictureAsync","data","console","log","setState","cameraResult","result","camera","callGoogleVIsionApi","state","loading","fetch","googleCloud","api","apiKey","method","body","JSON","stringify","features","type","maxResults","googleVisionRes","json","then","googleVisionDetetion","responses","catch","error","activeCamera","clickAgain","visionResponse","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Scan from './scan';\r\nimport config from '../config';\r\n\r\nclass CameraContainer extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            camera: false,\r\n            cameraResult: false,\r\n            result: null,\r\n            visionResponse: '',\r\n            loading: false,\r\n            googleVisionDetetion: undefined\r\n        };\r\n    }\r\n\r\n    takePicture = async (value) => {\r\n        if (value) {\r\n            const options = { quality: 0.5, base64: true };\r\n            const data = await value.takePictureAsync(options);\r\n            console.log(data);\r\n            this.setState({\r\n                cameraResult: true,\r\n                result: data.base64,\r\n                camera: false\r\n            }, () =>\r\n                    this.callGoogleVIsionApi(this.state.result))\r\n            this.setState({ loading: true });\r\n        }\r\n    };\r\n    callGoogleVIsionApi = async (base64) => {\r\n        let googleVisionRes = await fetch(config.googleCloud.api + config.googleCloud.apiKey, {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                \"requests\": [\r\n                    {\r\n                        \"image\": {\r\n                            \"content\": base64\r\n                        },\r\n                        features: [\r\n                            { type: \"LABEL_DETECTION\", maxResults: 10 },\r\n                            { type: \"LANDMARK_DETECTION\", maxResults: 5 },\r\n                            { type: \"FACE_DETECTION\", maxResults: 5 },\r\n                            { type: \"LOGO_DETECTION\", maxResults: 5 },\r\n                            { type: \"TEXT_DETECTION\", maxResults: 5 },\r\n                            { type: \"DOCUMENT_TEXT_DETECTION\", maxResults: 5 },\r\n                            { type: \"SAFE_SEARCH_DETECTION\", maxResults: 5 },\r\n                            { type: \"IMAGE_PROPERTIES\", maxResults: 5 },\r\n                            { type: \"CROP_HINTS\", maxResults: 5 },\r\n                            { type: \"WEB_DETECTION\", maxResults: 5 }\r\n                        ],\r\n                    }\r\n                ]\r\n            })\r\n        });\r\n\r\n        await googleVisionRes.json()\r\n            .then(googleVisionRes => {\r\n                console.log(googleVisionRes)\r\n                if (googleVisionRes) {\r\n                    this.setState(\r\n                        {\r\n                            loading: false,\r\n                            googleVisionDetetion: googleVisionRes.responses[0]\r\n                        }\r\n                    )\r\n                    console.log('this.is response', this.state.googleVisionDetetion);\r\n                }\r\n            }).catch((error) => { console.log(error) })\r\n    }\r\n    activeCamera = () => {\r\n        this.setState({\r\n            camera: true\r\n        })\r\n    }\r\n    clickAgain = () => {\r\n        this.setState({\r\n            camera: true,\r\n            googleVisionDetetion: false,\r\n            loading: false\r\n        })\r\n    }\r\n    render() {\r\n        const { camera, cameraResult, result, googleVisionDetetion, loading } = this.state\r\n        return (\r\n            <Scan\r\n                camera={camera}\r\n                cameraResult={cameraResult}\r\n                result={result}\r\n                clickAgain={this.clickAgain}\r\n                takePicture={(value) => this.takePicture(value)}\r\n                activeCamera={this.activeCamera}\r\n                googleVisionDetetion={googleVisionDetetion}\r\n                loading={loading}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default CameraContainer;"]},"metadata":{},"sourceType":"module"}